{{define "spec_input"}}## First user message: athletic profile

The first message {{if .}}you receive{{else}}the LLM receives{{end}} will be a JSON object that conforms to the following schema:

- **Profile**: The top-level object, representing a user's athletic profile.
  - `cycling_constraints`: Constraints related to cycling training.
  - `running_constraints`: Constraints related to running training.
  - `ftp`: The user's functional threshold power (FTP), expressed as an unsigned integer (in watts).

Each of `cycling_constraints` and `running_constraints` is a **SportConstraints** object with:

- `target_weekly_distance`: Total weekly training distance goal (unsigned integer in meters). Note that a week starts on Monday and ends on Sunday.
- `target_distance`: Target distance for a single session (unsigned integer in meters).
- `allowed_days`: A list of strings representing available training days. Each day is capitalized (e.g., `"Monday"`, `"Tuesday"`).
- `trains_indoors`: Boolean indicating if the user trains indoors.

All distances are unsigned integers, and JSON uses camelCase field names.

### Example JSON

```json
{
  "cycling_constraints": {
    "target_weekly_distance": 150,
    "target_distance": 40,
    "allowed_days": ["Monday", "Tuesday", "Friday"],
    "trains_indoors": true
  },
  "running_constraints": {
    "target_weekly_distance": 20,
    "target_distance": 5,
    "allowed_days": ["Wednesday", "Thursday", "Saturday", "Sunday"],
    "trains_indoors": false
  },
  "ftp": 260
}
```

## Second user message: recent activities

The second message {{if .}}you receive{{else}}the LLM receives{{end}} will be a JSON array of recent activities. Each activity has:

- `time`: ISO 8601 timestamp of when the activity occurred
- `duration`: Activity duration in seconds (integer)
- `duration_total`: Total duration including breaks in seconds (integer, optional)
- `distance`: Distance covered in meters (integer)
- `sport`: Sport type ("running", "cycling", or "swimming")
- `vertical_gain`: Elevation gain in meters (integer)
- `notes`: Free-form text notes (string)
- `was_recommended`: Whether this activity was recommended by the system (boolean)

### Example JSON

```
[
  {
    "time": "2024-01-15T18:30:00Z",
    "duration": 3600,
    "duration_total": 3720,
    "distance": 25000,
    "sport": "cycling",
    "vertical_gain": 350,
    "notes": "Evening ride, felt good despite headwind",
    "was_recommended": true
  },
  {
    "time": "2024-01-13T09:15:00Z",
    "duration": 2700,
    "distance": 7500,
    "sport": "running",
    "vertical_gain": 120,
    "notes": "Morning run in the park",
    "was_recommended": false
  },
  {
    "time": "2024-01-12T17:00:00Z",
    "duration": 3300,
    "duration_total": 3600,
    "distance": 22000,
    "sport": "cycling",
    "vertical_gain": 280,
    "notes": "Indoor trainer session",
    "was_recommended": true
  }
]
```{{end}}